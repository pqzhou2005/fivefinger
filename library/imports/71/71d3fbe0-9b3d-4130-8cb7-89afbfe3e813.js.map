{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Game.js"],"names":["cc","Class","extends","Component","properties","minDistance","maxDistance","stickPrefab","default","type","Prefab","fingerPrefab","playerPrefab","gameCamera","Node","scoreLabel","Label","onLoad","score","spawnFisrtFinger","node","on","Math","abs","currentDistance","stick","getComponent","getCurrentLength","finger","width","destroy","runAction","moveBy","v2","console","log","string","spawnRandomFinger","player","moveAndFail","height","event","stopPropagation","director","loadScene","start","onTouchStart","isValid","spawnStick","rotate","move","off","EventType","TOUCH_START","instantiate","addChild","postion","getFooterPostion","x","lastFinger","setPosition","fisrtFinger","y","moveUp","spawnPlayer","random","moveDown","min","max","floor"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        minDistance:50,\r\n\r\n        maxDistance:500,\r\n\r\n        stickPrefab: {\r\n            default: null,\r\n            type: cc.Prefab       \r\n        },\r\n\r\n        fingerPrefab: {\r\n            default: null,\r\n            type: cc.Prefab       \r\n        },\r\n\r\n        playerPrefab: {\r\n            default: null,\r\n            type: cc.Prefab       \r\n        },\r\n\r\n        gameCamera: {\r\n            default: null,\r\n            type: cc.Node      \r\n        },\r\n\r\n        scoreLabel : {\r\n            default: null,\r\n            type: cc.Label    \r\n        },\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () { \r\n\r\n        this.score = 0;\r\n        //生成第一个指头\r\n        this.spawnFisrtFinger();\r\n\r\n        //猴子移动结束\r\n        this.node.on('playerMoveOver',function() {\r\n            \r\n            if( Math.abs(this.currentDistance - this.stick.getComponent(\"Stick\").getCurrentLength() ) < this.finger.width/2)  {                \r\n    \r\n                this.stick.destroy();\r\n                this.gameCamera.runAction(new cc.moveBy(1,cc.v2(this.currentDistance,0)));\r\n                this.score += 1;   \r\n                console.log(this.score);\r\n                this.scoreLabel.string = \"Score:\"+this.score;        \r\n                this.spawnRandomFinger();\r\n\r\n            } else {                \r\n                this.player.getComponent('Player').moveAndFail(cc.v2(0,-this.node.height/2));\r\n            }\r\n        },this);\r\n\r\n        //游戏结束，切换场景\r\n        this.node.on('gameOver', function (event) {\r\n            event.stopPropagation();\r\n            cc.director.loadScene('start');\r\n        },this);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onTouchStart: function(event) {\r\n\r\n        if(!cc.isValid(this.stick)) {            \r\n            this.spawnStick();               \r\n        } else {\r\n            this.stick.getComponent('Stick').rotate(function() {\r\n                this.player.getComponent('Player').move(cc.v2(this.stick.getComponent(\"Stick\").getCurrentLength(),0));\r\n            },this);        \r\n            this.node.off(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    spawnStick: function() {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        this.stick = cc.instantiate(this.stickPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(this.stick);     \r\n\r\n        var postion = this.player.getComponent(\"Player\").getFooterPostion();\r\n        postion.x = this.lastFinger.x;\r\n        this.stick.setPosition(postion);\r\n    }, \r\n\r\n    //生成第一个指头和猴头\r\n    spawnFisrtFinger: function() {\r\n        this.fisrtFinger = this.finger = cc.instantiate(this.fingerPrefab);\r\n        this.node.addChild(this.fisrtFinger);\r\n        \r\n        var postion = cc.v2(0,0);\r\n        postion.x -= this.node.width/2-this.fisrtFinger.width/2;\r\n        postion.y -= this.node.height/2+this.fisrtFinger.height/2;\r\n\r\n        this.fisrtFinger.setPosition(postion);\r\n        this.fisrtFinger.getComponent(\"Finger\").moveUp(function(){\r\n            this.spawnPlayer();\r\n        },this);\r\n    },  \r\n\r\n    //生成第二个指头\r\n    spawnRandomFinger: function() {\r\n\r\n        this.currentDistance =  this.random(this.minDistance,this.maxDistance);\r\n\r\n        this.lastFinger = this.finger;\r\n        this.finger = cc.instantiate(this.fingerPrefab);\r\n        this.node.addChild(this.finger);\r\n\r\n        var postion = cc.v2(0,0);\r\n        postion.x = this.lastFinger.x + this.currentDistance;\r\n        postion.y -= this.node.height/2 + this.fisrtFinger.height/2;\r\n\r\n        this.finger.setPosition(postion);\r\n        this.finger.getComponent(\"Finger\").moveUp(function() {\r\n            this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        },this);\r\n    },  \r\n    \r\n    //生成猴头\r\n    spawnPlayer: function() {\r\n\r\n        this.player = cc.instantiate(this.playerPrefab);\r\n        this.node.addChild(this.player);\r\n\r\n        var postion = cc.v2(0,0);\r\n        postion.x = this.fisrtFinger.x;\r\n        postion.y = this.node.height/2;\r\n\r\n        this.player.setPosition(postion);\r\n        this.player.getComponent(\"Player\").moveDown(cc.v2(postion.x,-this.node.height/2+this.fisrtFinger.height+this.player.height/2),function(){\r\n            this.spawnRandomFinger();\r\n        },this);\r\n    },  \r\n\r\n    //随机\r\n    random: function(min, max) {        \r\n        return Math.floor(Math.random()*(max-min+1)+min);\r\n    },\r\n});\r\n"]}